import{mapLeft as t,fold as e}from"fp-ts/lib/Either";import{pipe as r,not as o,flow as s,absurd as a,identity as n}from"fp-ts/function";import{toNestError as p,validateFieldsNatively as i}from"@hookform/resolvers";import{TaggedUnionType as m,UnionType as f,IntersectionType as c}from"io-ts";import{map as l,filterMapWithIndex as u,toArray as y,last as d,Foldable as g}from"fp-ts/ReadonlyArray";import{none as h,some as v,map as O,getOrElseW as b,getOrElse as x}from"fp-ts/Option";import{fold as $,fromPredicate as N,fromNullable as j,mapLeft as k,getOrElseW as E}from"fp-ts/Either";import{fold as R}from"fp-ts/Semigroup";import{fromFoldableMap as w,map as S}from"fp-ts/ReadonlyRecord";function U(){return(U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}const V=t=>t.reduce((t,e,o)=>r(e,$(t=>`${o>0?".":""}${t}`,t=>`[${t}]`),e=>`${t}${e}`),""),A=t=>{const e=r(p=t.context,u((t,e)=>{const r=t-1;return void 0===p[r]||p[r].type instanceof m||p[r].type instanceof f||p[r].type instanceof c?h:v(e)}),l(({key:t})=>t),l(t=>r(t,t=>parseInt(t,10),N(o(Number.isNaN),()=>t))),y,V);var p;return{message:r(t.message,j(t.context),k(s(d,O(t=>`expected ${t.type.name} but got ${JSON.stringify(t.actual)}`),b(()=>a("Error context is missing name")))),E(n)),type:r(t.context,d,O(t=>t.type.name),x(()=>"unknown")),path:e}},I=t=>r(t,l(t=>({[t.path]:{type:t.type,message:t.message}})),t=>R({concat:(t,e)=>Object.assign({},e,t)})({},t)),J={concat:(t,e)=>U({},e,{types:U({},t.types,{[t.type]:t.message,[e.type]:e.message})})},L=t=>r(w(J,g)(t,t=>[t.path,t]),S(t=>function(t,e){if(null==t)return{};var r,o,s={},a=Object.keys(t);for(o=0;o<a.length;o++)e.indexOf(r=a[o])>=0||(s[r]=t[r]);return s}(t,["path"]))),M=o=>(s,a,n)=>{return r(s,o.decode,t((m=!n.shouldUseNativeValidation&&"all"===n.criteriaMode,t=>{const e=m?L:I;return r(t,l(A),e)})),t(t=>p(t,n)),e(t=>({values:{},errors:t}),t=>(n.shouldUseNativeValidation&&i({},n),{values:t,errors:{}})));var m};export{M as ioTsResolver};
//# sourceMappingURL=io-ts.modern.js.map
