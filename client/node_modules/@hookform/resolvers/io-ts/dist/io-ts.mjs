import{mapLeft as t,fold as n}from"fp-ts/lib/Either";import{pipe as r,not as e,flow as o,absurd as u,identity as i}from"fp-ts/function";import{toNestError as f,validateFieldsNatively as a}from"@hookform/resolvers";import{TaggedUnionType as c,UnionType as s,IntersectionType as p}from"io-ts";import{map as m,filterMapWithIndex as l,toArray as y,last as v,Foldable as d}from"fp-ts/ReadonlyArray";import{none as g,some as h,map as O,getOrElseW as b,getOrElse as x}from"fp-ts/Option";import{fold as N,fromPredicate as j,fromNullable as k,mapLeft as E,getOrElseW as R}from"fp-ts/Either";import{fold as w}from"fp-ts/Semigroup";import{fromFoldableMap as S,map as U}from"fp-ts/ReadonlyRecord";function V(){return(V=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t}).apply(this,arguments)}var A=function(t){return t.reduce(function(t,n,e){return r(n,N(function(t){return(e>0?".":"")+t},function(t){return"["+t+"]"}),function(n){return""+t+n})},"")},I=function(t){var n,f=r(n=t.context,l(function(t,r){var e=t-1;return void 0===n[e]||n[e].type instanceof c||n[e].type instanceof s||n[e].type instanceof p?g:h(r)}),m(function(t){return t.key}),m(function(t){return r(t,function(t){return parseInt(t,10)},j(e(Number.isNaN),function(){return t}))}),y,A);return{message:r(t.message,k(t.context),E(o(v,O(function(t){return"expected "+t.type.name+" but got "+JSON.stringify(t.actual)}),b(function(){return u("Error context is missing name")}))),R(i)),type:r(t.context,v,O(function(t){return t.type.name}),x(function(){return"unknown"})),path:f}},J=function(t){return r(t,m(function(t){var n;return(n={})[t.path]={type:t.type,message:t.message},n}),function(t){return w({concat:function(t,n){return Object.assign({},n,t)}})({},t)})},L={concat:function(t,n){var r;return V({},n,{types:V({},t.types,(r={},r[t.type]=t.message,r[n.type]=n.message,r))})}},M=function(t){return r(S(L,d)(t,function(t){return[t.path,t]}),U(function(t){return function(t,n){if(null==t)return{};var r,e,o={},u=Object.keys(t);for(e=0;e<u.length;e++)n.indexOf(r=u[e])>=0||(o[r]=t[r]);return o}(t,["path"])}))},P=function(e){return function(o,u,i){return r(o,e.decode,t((c=!i.shouldUseNativeValidation&&"all"===i.criteriaMode,function(t){var n=c?M:J;return r(t,m(I),n)})),t(function(t){return f(t,i)}),n(function(t){return{values:{},errors:t}},function(t){return i.shouldUseNativeValidation&&a({},i),{values:t,errors:{}}}));var c}};export{P as ioTsResolver};
//# sourceMappingURL=io-ts.module.js.map
